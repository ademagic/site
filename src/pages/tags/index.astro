---
import BaseLayout from '../../layouts/BaseLayout.astro';
import getTags from '../../utils/getTags';

const title = 'Tags';
const description = 'A list of tags associated with my blogposts to help you browse them better.';
const permalink = `${Astro.site.href}tags`;

let allPosts = await Astro.glob('../../data/blog-posts/*.md');

let {tags: allTags, tagCount} = getTags(allPosts.map(a => ({tags: a.frontmatter.tags})));
---

<BaseLayout title={title} description={description} permalink={permalink} current="blog">
  <div class="container">
    <h1>Tags</h1>
    <p>{description}</p>
    <ul class="tag-list">
      {
        allTags.map((tag) => (
          <li class="tag">
            <a href={`/tags/${tag}`}>{tag}</a>
            <span>{tagCount[tag]}</span>
          </li>
        ))
      }
    </ul>
  </div>
</BaseLayout>

<style>
  .tag-list {
    margin: 0;
    padding: 0;
  }
  .tag {
    display: inline-block;
    background-color: var(--code-text);
    color: var(--code-body);
    margin: 0 0 0.5em 0.5em;
    padding: 0.2em 0.5em;
    border-radius: 4px;
  }

  .tag span {
    display: inline-block;
    border-radius: 50%;
    box-shadow: 2px 2px 2px var(--code-text);
    color: var(--code-body);
    text-align: center;
    font-size: 14px;
    font-family: var(--font-family-sans);
    background-color: var(--text-highlight);
    vertical-align: middle;
    height: 1.5em;
    line-height: 1.5;
    width: 1.5em;
  }
</style>
