---
import BaseLayout from '../layouts/BaseLayout.astro';
import Card from '../components/Card.astro';
import { timerMessage } from 'astro/dist/core/logger/core';

const title = 'Now';
const description = 'What I am focusing on at this point in my life. Based on nownownow.com';
const permalink = `${Astro.site.href}now`;

const response = await fetch(`${import.meta.env.PUBLIC_API_LASTFM}/?method=user.getrecenttracks&user=mikoa&api_key=${import.meta.env.KEY_LASTFM}&format=json&limit=1&extended=1`);
const data = await response.json();
const track = data.recenttracks.track[0];
---

<BaseLayout title={title} description={description} permalink={permalink}>
  <div class="container wide">
    <div class="grid">
      <div class="left">
        <h1>Now</h1>
        <p><a href="https://nownownow.com/about" target="_blank" rel="noreferrer noopener">Now</a> pages are more stable than a social media feed and less permanent than an <a href="/about">About</a> page. Updated monthly-ish.</p>
      </div>
      <div class="right">
        <Card>
          <ul class="nowlist">
            {track && <li>ðŸŽ§:<a href={track.url}>{track.artist?.name} - {track.name}</a></li>}
            <li>ðŸ“š: <a href="/blog/chipping-away-at-my-reading-list">355 <span class="plus">+0</span> <span class="minus">-0</span></a></li>
            <li>ðŸ“–: <a href="https://amzn.asia/d/9Vyk7r2">Engineering Management for the Rest of Us - Sarah Drasner</a></li>
            <li>ðŸŽ¸: Nothing (for now).</li>
          </ul>
        </Card>
      </div>
    </div>
    <hr/>
    <h2>September</h2>
    <span class="date">22/09/23</span>
    <p>We moved! Bought our first apartment, excited to make our home here after moving out of our home of the past 7 years. It's been a challenge to get in front of the computer at times, but it's slowly working out.</p>
    <ul>
      <li>Really making an effort to work on my site more. Trying to create myself an easy to consume tasklist</li>
      <li>Finished off a mammoth effort of implementing notifications on Android and iOS... Was a tricky back and forth, but a satisfying outcome.</li>
      <li>After the end of our office lease, my company has decided to go fully remote for the short term. Hoping to write a few blogposts about our experience.</li>
    </ul>
  </div>
</BaseLayout>

<style>
  .date {
    font-family: var(--font-family-sans);
    color: var(--text-secondary);
  }

  .grid {
    display: grid;
    grid-template-columns: 1fr 2fr;
  }

  .right {
    margin-left: 3em;
  }

  .nowlist {
    list-style: none;
  }

  .plus,
  .minus {
    font-size: 1rem;
  }

  .plus {
    color: rgb(19, 190, 125);
  }

  .minus {
    color: rgb(202, 54, 54);
  }
</style>