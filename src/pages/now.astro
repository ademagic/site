---
import BaseLayout from '../layouts/BaseLayout.astro';
import Card from '../components/Card.astro';

const title = 'Now';
const description = 'What I am focusing on at this point in my life. Based on nownownow.com';
const permalink = `${Astro.site.href}now`;

const response = await fetch(`${import.meta.env.PUBLIC_API_LASTFM}/?method=user.getrecenttracks&user=mikoa&api_key=${import.meta.env.KEY_LASTFM}&format=json&limit=1&extended=1`);
const data = await response.json();
const track = data.recenttracks.track[0];
---

<BaseLayout title={title} description={description} permalink={permalink}>
  <div class="container wide">
    <div class="grid">
      <div class="left">
        <h1>Now</h1>
        <p><a href="https://nownownow.com/about" target="_blank" rel="noreferrer noopener">Now</a> pages are more stable than a social media feed and less permanent than an <a href="/about">About</a> page. Updated monthly-ish.</p>
      </div>
      <div class="right">
        <Card>
          <ul class="nowlist">
            {track && <li>ðŸŽ§:<a href={track.url}>{track.artist?.name} - {track.name}</a></li>}
            <li>ðŸ“š: <a href="/blog/chipping-away-at-my-reading-list">189 <span class="plus">+3</span> <span class="minus">-0</span></a></li>
            <li>ðŸ“–: <a href="https://amzn.asia/d/9Vyk7r2">Engineering Management for the Rest of Us - Sarah Drasner</a></li>
            <li>ðŸŽ¸: <a href="https://open.spotify.com/track/2Mr7sMG4UAPK7q18m05pjM?si=f21b08d3a45e4d92">Francisco Tarrega - Gran Vals</a></li>
          </ul>
        </Card>
      </div>
    </div>
    <hr/>
    <h2>February</h2>
    <span class="date">01/02/24</span>
    <ul>
      <li>And the year comes off to a crawling start.</li>
      <li>Slowly working on my redesign. Hope to start rolling stuff out soon; I started way too late for a "new year new me" design.</li>
      <li>Planning a trip to Japan woohoo!</li>
    </ul>
  </div>
</BaseLayout>

<style>
  .date {
    font-family: var(--font-family-sans);
    color: var(--text-secondary);
  }

  .grid {
    display: grid;
    grid-template-columns: 1fr 2fr;
  }

  .right {
    margin-left: 3em;
  }

  .nowlist {
    list-style: none;
  }

  .plus,
  .minus {
    font-size: 1rem;
  }

  .plus {
    color: rgb(19, 190, 125);
  }

  .minus {
    color: rgb(202, 54, 54);
  }
</style>